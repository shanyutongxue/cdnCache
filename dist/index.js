!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Editor=t():e.Editor=t()}(window,function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}({"./src/Node/OutputNode/outputNode.frag":
/*!*********************************************!*\
  !*** ./src/Node/OutputNode/outputNode.frag ***!
  \*********************************************/
/*! no static exports found */function(e,t){e.exports="precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying float v_progress;\nvoid main(){\n    gl_FragColor = texture2D(u_image, v_texCoord);\n}\n"},"./src/Node/OutputNode/outputNode.js":
/*!*******************************************!*\
  !*** ./src/Node/OutputNode/outputNode.js ***!
  \*******************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ../ProcessingNodes/processingNode */"./src/Node/ProcessingNodes/processingNode.js"),r=i(/*! ./outputNode.frag */"./src/Node/OutputNode/outputNode.frag"),n=i.n(r),o=i(/*! ./outputNode.vert */"./src/Node/OutputNode/outputNode.vert"),a=i.n(o);const u="OutputNode";t.default=class extends s.default{constructor(e,t){let i={vertexShader:a(),fragmentShader:n(),propertties:{},inputs:["u_image"]};super(e,t,i,i.inputs,!1),this._displayName=u}_render(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),this.inputs.forEach(t=>{super._render();var i=t._texture;for(let t of this._shaderInputsTextureUnitMapping)e.activeTexture(t.textureUnit),e.uniform1i(t.location,t.textureUnitIndex),e.bindTexture(e.TEXTURE_2D,i);e.drawArrays(e.TRIANGLES,0,6)})}}},"./src/Node/OutputNode/outputNode.vert":
/*!*********************************************!*\
  !*** ./src/Node/OutputNode/outputNode.vert ***!
  \*********************************************/
/*! no static exports found */function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\nvoid main() {\n    gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n    v_texCoord = a_texCoord;\n}\n"},"./src/Node/ProcessingNodes/processingNode.js":
/*!****************************************************!*\
  !*** ./src/Node/ProcessingNodes/processingNode.js ***!
  \****************************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return o});var s=i(/*! ../baseNode */"./src/Node/baseNode.js"),r=i(/*! ../../utils/glutils */"./src/utils/glutils.js");const n="ProcessingNode";class o extends s.default{constructor(e,t,i,s,o){super(e,t,s,o),this._vertexShader=r.default.compileShader(e,i.vertexShader,e.VERTEX_SHADER),this._fragmentShader=r.default.compileShader(e,i.fragmentShader,e.FRAGMENT_SHADER),this._definition=i,this._properties={};for(let e in i.properties){let t=i.properties[e].value;"[object Array]"===Object.prototype.toString.call(t)&&(t=i.properties[e].value.slice());let s=i.properties[e].type;this._properties[e]={type:s,value:t}}this._shaderInputsTextureUnitMapping=[],this._maxTextureUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this._boundTextureUnits=0,this._texture=r.default.createElementTexture(e),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.canvas.width,e.canvas.height,0,e.RGBA,e.UNSIGNED_BYTE,null),this._program=r.default.createShaderProgram(e,this._vertexShader,this._fragmentShader),this._framebuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.bindFramebuffer(e.FRAMEBUFFER,null);for(let e in this._properties)Object.defineProperty(this,e,{get:function(){return this._properties[e].value},set:function(t){this._properties[e].value=t}});for(let t in this._properties){this._properties[t].value instanceof Image&&(this._properties[t].texture=r.default.createElementTexture(e),this._properties[t].textureUnit=e.TEXTURE0+this._boundTextureUnits,this._properties[t].textureUnitIndex=this._boundTextureUnits,this._boundTextureUnits+=1,this._boundTextureUnits,this._maxTextureUnits)}for(let t of i.inputs)this._shaderInputsTextureUnitMapping.push({name:t,textureUnit:e.TEXTURE0+this._boundTextureUnits,textureUnitIndex:this._boundTextureUnits,location:e.getUniformLocation(this._program,t)}),this._boundTextureUnits+=1,this._boundTextureUnits,this._maxTextureUnits;for(let e in this._properties)"uniform"===this._properties[e].type&&(this._properties[e].location=this._gl.getUniformLocation(this._program,e));this._currentTimeLocation=this._gl.getUniformLocation(this._program,"currentTime"),this._currentTime=0;let a=e.getAttribLocation(this._program,"a_position"),u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,1,0,0,1,0,0]),e.STATIC_DRAW);let l=e.getAttribLocation(this._program,"a_texCoord");e.enableVertexAttribArray(l),e.vertexAttribPointer(l,2,e.FLOAT,!1,0,0),this._displayName=n}_update(e){this._currentTime=e}_seek(e){this._currentTime=e}_render(){this._rendered=!0;let e=this._gl;e.viewport(0,0,e.canvas.width,e.canvas.height),e.useProgram(this._program),e.uniform1f(this._currentTimeLocation,parseFloat(this._currentTime));for(let t in this._properties){let i=this._properties[t].value,s=this._properties[t].type,n=this._properties[t].location;if("uniform"===s)if("number"==typeof i)e.uniform1f(n,i);else if("[object Array]"===Object.prototype.toString.call(i))1===i.length?e.uniform1fv(n,i):2===i.length?e.uniform2fv(n,i):3===i.length?e.uniform3fv(n,i):4===i.length?e.uniform4fv(n,i):console.debug("Shader parameter",t,"is too long an array:",i);else if(i instanceof Image){let s=this._properties[t].texture,o=this._properties[t].textureUnit,a=this._properties[t].textureUnit;r.default.updateTexture(e,s,i),e.activeTexture(o),e.uniform1i(n,a),e.bindTexture(e.TEXTURE_2D,s)}}}destroy(){super.destroy();for(let e in this._properties){this._properties[e].value instanceof Image&&(this._gl.deleteTexture(this._properties[e].texture),this._texture=void 0)}this._gl.deleteTexture(this._texture),this._texture=void 0,this._gl.detachShader(this._program,this._vertexShader),this._gl.detachShader(this._program,this._fragmentShader),this._gl.deleteShader(this._vertexShader),this._gl.deleteShader(this._fragmentShader),this._gl.deleteProgram(this._program),this._gl.deleteFramebuffer(this._framebuffer)}}},"./src/Node/SourceNode/sourcenode.js":
/*!*******************************************!*\
  !*** ./src/Node/SourceNode/sourcenode.js ***!
  \*******************************************/
/*! exports provided: SOURCENODESTATE, SOURCETYPE, default */function(e,t,i){"use strict";i.r(t),i.d(t,"SOURCENODESTATE",function(){return n}),i.d(t,"SOURCETYPE",function(){return o});var s=i(/*! ../../utils/glutils */"./src/utils/glutils.js"),r=i(/*! ../baseNode */"./src/Node/baseNode.js");let n={waiting:0,sequenced:1,playing:2,paused:3,ended:4,error:5};const o="SourceNode";class a extends r.default{constructor(e,t,i,r){super(t,i,[],!0),this._element=void 0,this._elementURL=void 0,this._isResponsibleForElementLifeCycle=!0,"string"==typeof e||void 0!==window.MediaStream&&e instanceof MediaStream?this._elementURL=e:(this._element=e,this._isResponsibleForElementLifeCycle=!1),this._state=n.waiting,this._currentTime=r,this._startTime=NaN,this._stopTime=1/0,this._ready=!1,this._loadCalled=!1,this._stretchPaused=!1,this._texture=s.default.createElementTexture(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this._callbacks=[],this._renderPaused=!1,this._displayName=o}get state(){return this._state}get element(){return this._element}get duration(){if(!isNaN(this._startTime))return this._stopTime===1/0?1/0:this._stopTime-this._startTime}set stretchPaused(e){this._stretchPaused=e}get stretchPaused(){return this._stretchPaused}_load(){this._loadCalled||(this._triggerCallbacks("load"),this._loadCalled=!0)}_unload(){this._triggerCallbacks("destroy"),this._loadCalled=!1}registerCallback(e,t){this._callbacks.push({type:e,func:t})}unregisterCallback(e){let t=[];for(let i of this._callbacks)void 0===e?t.push(i):i.func===e&&t.push(i);for(let e of t){let t=this._callbacks.indexOf(e);this._callbacks.splice(t,1)}}_triggerCallbacks(e,t){for(let i of this._callbacks)i.type===e&&(void 0!==t?i.func(this,t):i.func(this))}start(e){return this._state!==n.waiting?(console.debug("SourceNode is has already been sequenced. Can't sequence twice."),!1):(this._startTime=this._currentTime+e,this._state=n.sequenced,!0)}startAt(e){return this._state!==n.waiting?(console.debug("SourceNode is has already been sequenced. Can't sequence twice."),!1):(this._startTime=e,this._state=n.sequenced,!0)}get startTime(){return this._startTime}stop(e){return this._state===n.ended?(console.debug("SourceNode has already ended. Cannot call stop."),!1):this._state===n.waiting?(console.debug("SourceNode must have start called before stop is called"),!1):this._currentTime+e<=this._startTime?(console.debug("SourceNode must have a stop time after it's start time, not before."),!1):(this._stopTime=this._currentTime+e,this._stretchPaused=!1,this._triggerCallbacks("durationchange",this.duration),!0)}stopAt(e){return this._state===n.ended?(console.debug("SourceNode has already ended. Cannot call stop."),!1):this._state===n.waiting?(console.debug("SourceNode must have start called before stop is called"),!1):e<=this._startTime?(console.debug("SourceNode must have a stop time after it's start time, not before."),!1):(this._stopTime=e,this._stretchPaused=!1,this._triggerCallbacks("durationchange",this.duration),!0)}get stopTime(){return this._stopTime}_seek(e){this._renderPaused=!1,this._triggerCallbacks("seek",e),this._state!==n.waiting&&(e<this._startTime&&(s.default.clearTexture(this._gl,this._texture),this._state=n.sequenced),e>=this._startTime&&this._state!==n.paused&&(this._state=n.playing),e>=this._stopTime&&(s.default.clearTexture(this._gl,this._texture),this._triggerCallbacks("ended"),this._state=n.ended),this._currentTime=e)}_pause(){(this._state===n.playing||0===this._currentTime&&0===this._startTime)&&(this._triggerCallbacks("pause"),this._state=n.paused,this._renderPaused=!1)}_play(){this._state===n.paused&&(this._triggerCallbacks("play"),this._state=n.playing)}_isReady(){return!this._buffering&&(this._state!==n.playing&&this._state!==n.paused&&this._state!==n.error||this._ready)}_update(e,t=!0){this._rendered=!0;let i=e-this._currentTime;return this._currentTime=e,this._state!==n.waiting&&this._state!==n.ended&&this._state!==n.error&&(this._triggerCallbacks("render",e),e<this._startTime&&(s.default.clearTexture(this._gl,this._texture),this._state=n.sequenced),e>=this._startTime&&this._state!==n.paused&&this._state!==n.error&&(this._state!==n.playing&&this._triggerCallbacks("play"),this._state=n.playing),e>=this._stopTime&&(s.default.clearTexture(this._gl,this._texture),this._triggerCallbacks("ended"),this._state=n.ended),void 0===this._element||!1===this._ready||(this._renderPaused||this._state!==n.paused||(t&&s.default.updateTexture(this._gl,this._texture,this._element),this._renderPaused=!0),this._state===n.playing&&(t&&s.default.updateTexture(this._gl,this._texture,this._element),this._stretchPaused&&(this._stopTime+=i)),!0))}clearTimelineState(){this._startTime=NaN,this._stopTime=1/0,this._state=n.waiting}destroy(){this._unload(),super.destroy(),this.unregisterCallback(),delete this._element,this._elementURL=void 0,this._state=n.waiting,this._currentTime=0,this._startTime=NaN,this._stopTime=1/0,this._ready=!1,this._loadCalled=!1,this._gl.deleteTexture(this._texture),this._texture=void 0}}a.SOURCENODESTATE=n,a.SOURCETYPE=o,t.default=a},"./src/Node/baseNode.js":
/*!******************************!*\
  !*** ./src/Node/baseNode.js ***!
  \******************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return r});const s="BaseNode";class r{constructor(e,t,i,r=!1){this._gl=e,this._graphManager=t,this._inputNames=i,this._limitConnections=r,this._destroyed=!1,this._rendered=!1,this._displayName=s}get displayName(){return this._displayName}get inputNames(){return this._inputNames.slice()}get maximumConnections(){return!1===this._limitConnections?1/0:this._inputNames.length}get inputs(){let e=this._graphManager.getInputsForNode(this);return e=e.filter(function(e){return void 0!==e})}get outputs(){return this._graphManager.getOutputsForNode(this)}get destroyed(){return this._destroyed}connect(e,t){return this._graphManager.registerConnection(this,e,t)}disconnect(e){if(void 0===e){let e=this._graphManager.getOutputsForNode(this);return e.forEach(e=>this._graphManager.unregisterConnection(this,e)),e.length>0}return this._graphManager.unregisterConnection(this,e)}destroy(){this.disconnect();for(let e of this.inputs)e.disconnect(this);this._destroyed=!0}}},"./src/TimeclockManager/timeclockmanager.js":
/*!**************************************************!*\
  !*** ./src/TimeclockManager/timeclockmanager.js ***!
  \**************************************************/
/*! exports provided: TimeclockManager */function(e,t,i){"use strict";i.r(t),i.d(t,"TimeclockManager",function(){return s});class s{constructor(){this._editors=[],this._active=!1,this._previousRAFTime=void 0,this._useWebworker=!1,this._previousWorkerTime=void 0,this._webWorkerString="            var running = false;            function tick(){                postMessage(Date.now());                if (running){                    setTimeout(tick, 1000/20);                }            }            self.addEventListener('message',function(msg){                var data = msg.data;                if (data === 'start'){                    running = true;                    tick();                }                if (data === 'stop') running = false;            });",this._webWorker=void 0}_initWebWorker(){window.URL=window.URL||window.webkitURL;let e=new Blob([this._webWorkerString],{type:"application/javascript"});this._webWorker=new Worker(URL.createObjectURL(e)),this._webWorker.onmessage=(e=>{let t=e.data;this._updateWorkerTime(t)})}_init(){if(window.Worker){if(void 0===document.hidden)return window.addEventListener("focus",this._gainedVisibility.bind(this)),void window.addEventListener("blur",this._lostVisibility.bind(this));document.addEventListener("visibilitychange",()=>{!0===document.hidden?this._lostVisibility():this._gainedVisibility()},!1),requestAnimationFrame(this._updateRAFTime.bind(this))}}_updateWorkerTime(e){let t=(e-this._previousWorkerTime)/1e3;0!==t&&this._update(t),this._previousWorkerTime=e}_lostVisibility(){console.log("lost visibility"),this._previousWorkerTime=Date.now(),this._useWebworker=!0,this._webWorker||this._initWebWorker(),this._webWorker.postMessage("start")}_gainedVisibility(){console.log("gained visibility"),this._useWebworker=!1,this._previousRAFTime=void 0,this._webWorker&&this._webWorker.postMessage("stop"),requestAnimationFrame(this._updateRAFTime.bind(this))}_updateRAFTime(e){if(!this._active)return void(this._previousRAFTime=void 0);void 0===this._previousRAFTime&&(this._previousRAFTime=e);let t=(e-this._previousRAFTime)/1e3;0!==t&&this._update(t),this._previousRAFTime=e,requestAnimationFrame(this._updateRAFTime.bind(this))}_update(e){for(let t=0;t<this._editors.length;t++)this._editors[t]._update(parseFloat(e))}_start(){this._active||(this._active=!0,this._init())}_pause(){this._active=!1}register(e){this._editors.push(e),this._start()}}},"./src/definitions/definitions.js":
/*!****************************************!*\
  !*** ./src/definitions/definitions.js ***!
  \****************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ./monochrome/monochrome */"./src/definitions/monochrome/monochrome.js"),r=i(/*! ./dreamfade/dreamfade */"./src/definitions/dreamfade/dreamfade.js"),n=i(/*! ./windowslice/windowslice */"./src/definitions/windowslice/windowslice.js"),o=i(/*! ./directional/directional */"./src/definitions/directional/directional.js");let a={MONOCHROME:s.default,DREAMFADE:r.default,WINDOWSLICE:n.default,DIRECTIONAL:o.default};t.default=a},"./src/definitions/directional/directional.frag":
/*!******************************************************!*\
  !*** ./src/definitions/directional/directional.frag ***!
  \******************************************************/
/*! no static exports found */function(e,t){e.exports="precision mediump float;\nuniform vec2 direction;\nuniform float progress;\nuniform sampler2D u_image_a, u_image_b;\n\nvarying vec2 v_texCoord;\n\nvec4 getFromColor(vec2 v_texCoord){\n\treturn texture2D(u_image_a, v_texCoord);\n}\nvec4 getToColor(vec2 v_texCoord){\n\treturn texture2D(u_image_b, v_texCoord);\n}\n\nvec4 transition (vec2 uv) {\n  vec2 p = uv + progress * sign(direction);\n  vec2 f = fract(p);\n  return mix(\n    getToColor(f),\n    getFromColor(f),\n    step(0.0, p.y) * step(p.y, 1.0) * step(0.0, p.x) * step(p.x, 1.0)\n  );\n}\n\nvoid main() {\n    gl_FragColor = transition(v_texCoord);\n}"},"./src/definitions/directional/directional.js":
/*!****************************************************!*\
  !*** ./src/definitions/directional/directional.js ***!
  \****************************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ./directional.vert */"./src/definitions/directional/directional.vert"),r=i.n(s),n=i(/*! ./directional.frag */"./src/definitions/directional/directional.frag"),o=i.n(n);let a={title:"Dream-Fade",description:"A translation effect. Typically used as a transistion.",vertexShader:r(),fragmentShader:o(),properties:{mix:{type:"uniform",value:[0,2]}},inputs:["u_image_a","u_image_b"]};t.default=a},"./src/definitions/directional/directional.vert":
/*!******************************************************!*\
  !*** ./src/definitions/directional/directional.vert ***!
  \******************************************************/
/*! no static exports found */function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\n\nvoid main(){\n\tgl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n    v_texCoord = a_texCoord;\n}"},"./src/definitions/dreamfade/dreamfade.frag":
/*!**************************************************!*\
  !*** ./src/definitions/dreamfade/dreamfade.frag ***!
  \**************************************************/
/*! no static exports found */function(e,t){e.exports="precision mediump float;\nuniform sampler2D u_image_a;\nuniform sampler2D u_image_b;\nuniform float mix;\nvarying vec2 v_texCoord;\nvarying float v_mix;\nvoid main(){\n    float wobble = 1.0 - abs((mix*2.0)-1.0);\n    vec2 pos = vec2(v_texCoord[0] + ((sin(v_texCoord[1]*(10.0*wobble*3.14) + wobble*10.0)/13.0)), v_texCoord[1]);\n    vec4 color_a = texture2D(u_image_a, pos);\n    vec4 color_b = texture2D(u_image_b, pos);\n    color_a[0] *= (1.0 - mix);\n    color_a[1] *= (1.0 - mix);\n    color_a[2] *= (1.0 - mix);\n    color_a[3] *= (1.0 - mix);\n    color_b[0] *= mix;\n    color_b[1] *= mix;\n    color_b[2] *= mix;\n    color_b[3] *= mix;\n    gl_FragColor = color_a + color_b;\n}\n"},"./src/definitions/dreamfade/dreamfade.js":
/*!************************************************!*\
  !*** ./src/definitions/dreamfade/dreamfade.js ***!
  \************************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ./dreamfade.vert */"./src/definitions/dreamfade/dreamfade.vert"),r=i.n(s),n=i(/*! ./dreamfade.frag */"./src/definitions/dreamfade/dreamfade.frag"),o=i.n(n);let a={title:"Dream-Fade",description:"A wobbly dream effect. Typically used as a transistion.",vertexShader:r(),fragmentShader:o(),properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]};t.default=a},"./src/definitions/dreamfade/dreamfade.vert":
/*!**************************************************!*\
  !*** ./src/definitions/dreamfade/dreamfade.vert ***!
  \**************************************************/
/*! no static exports found */function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\nvoid main() {\n    gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n    v_texCoord = a_texCoord;\n}\n"},"./src/definitions/monochrome/monochrome.frag":
/*!****************************************************!*\
  !*** ./src/definitions/monochrome/monochrome.frag ***!
  \****************************************************/
/*! no static exports found */function(e,t){e.exports="precision mediump float;\nuniform sampler2D u_image;\nuniform vec3 inputMix;\nuniform vec3 outputMix;\nvarying vec2 v_texCoord;\nvarying float v_mix;\nvoid main(){\n    vec4 color = texture2D(u_image, v_texCoord);\n    float mono = color[0]*inputMix[0] + color[1]*inputMix[1] + color[2]*inputMix[2];\n    color[0] = mono * outputMix[0];\n    color[1] = mono * outputMix[1];\n    color[2] = mono * outputMix[2];\n    gl_FragColor = color;\n}\n"},"./src/definitions/monochrome/monochrome.js":
/*!**************************************************!*\
  !*** ./src/definitions/monochrome/monochrome.js ***!
  \**************************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ./monochrome.vert */"./src/definitions/monochrome/monochrome.vert"),r=i.n(s),n=i(/*! ./monochrome.frag */"./src/definitions/monochrome/monochrome.frag"),o=i.n(n);let a={title:"Monochrome",description:"Change images to a single chroma (e.g can be used to make a black & white filter). Input color mix and output color mix can be adjusted.",vertexShader:r(),fragmentShader:o(),properties:{inputMix:{type:"uniform",value:[.4,.6,.2]},outputMix:{type:"uniform",value:[1,1,1]}},inputs:["u_image"]};t.default=a},"./src/definitions/monochrome/monochrome.vert":
/*!****************************************************!*\
  !*** ./src/definitions/monochrome/monochrome.vert ***!
  \****************************************************/
/*! no static exports found */function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\nvoid main() {\n    gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n    v_texCoord = a_texCoord;\n}\n"},"./src/definitions/windowslice/windowslice.frag":
/*!******************************************************!*\
  !*** ./src/definitions/windowslice/windowslice.frag ***!
  \******************************************************/
/*! no static exports found */function(e,t){e.exports="precision mediump float;\nuniform float count;\nuniform float smoothness;\nuniform float progress;\nuniform sampler2D u_image_a, u_image_b;\n\nvarying vec2 v_texCoord;\n\nvec4 getFromColor(vec2 v_texCoord){\n\treturn texture2D(u_image_a, v_texCoord);\n}\nvec4 getToColor(vec2 v_texCoord){\n\treturn texture2D(u_image_b, v_texCoord);\n}\n\nvec4 transition (vec2 p) {\n  float pr = smoothstep(-smoothness, 0.0, p.x - progress * (1.0 + smoothness));\n  float s = step(pr, fract(count * p.x));\n  return mix(getFromColor(p), getToColor(p), s);\n}\n\nvoid main(){\n\tgl_FragColor = transition(v_texCoord);\n}"},"./src/definitions/windowslice/windowslice.js":
/*!****************************************************!*\
  !*** ./src/definitions/windowslice/windowslice.js ***!
  \****************************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ./windowslice.vert */"./src/definitions/windowslice/windowslice.vert"),r=i.n(s),n=i(/*! ./windowslice.frag */"./src/definitions/windowslice/windowslice.frag"),o=i.n(n);let a={title:"Windowslice",description:"",vertexShader:r(),fragmentShader:o(),properties:{count:{type:"uniform",value:10},smoothness:{type:"uniform",value:.5}},inputs:["u_image_a","u_image_b"]};t.default=a},"./src/definitions/windowslice/windowslice.vert":
/*!******************************************************!*\
  !*** ./src/definitions/windowslice/windowslice.vert ***!
  \******************************************************/
/*! no static exports found */function(e,t){e.exports="attribute vec2 a_position;\nattribute vec2 a_texCoord;\nvarying vec2 v_texCoord;\n\nvoid main(){\n\tgl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n    v_texCoord = a_texCoord;\n}"},"./src/editor.js":
/*!***********************!*\
  !*** ./src/editor.js ***!
  \***********************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return p});var s=i(/*! ./TimeclockManager/timeclockmanager */"./src/TimeclockManager/timeclockmanager.js"),r=i(/*! ./utils/utils */"./src/utils/utils.js"),n=i(/*! ./utils/glutils */"./src/utils/glutils.js"),o=i(/*! ./graphManager */"./src/graphManager.js"),a=i(/*! ./Node/ProcessingNodes/processingNode */"./src/Node/ProcessingNodes/processingNode.js"),u=i(/*! ./Node/OutputNode/outputNode */"./src/Node/OutputNode/outputNode.js"),l=i(/*! ./Node/SourceNode/sourcenode */"./src/Node/SourceNode/sourcenode.js"),d=i(/*! ./definitions/definitions */"./src/definitions/definitions.js");const c=l.default.SOURCENODESTATE,_=Object.freeze({PLAYING:0,PAUSED:1,STALLED:2,ENDED:3,ERROR:4}),h=new s.TimeclockManager;class p{constructor(e){this._init(),this._canvas=e,this._gl=e.getContext("experimental-webgl"),this._graphManager=new o.default,this._outputNode=new u.default(this._gl,this._graphManager),null!==this._gl?(this._callPlugins(),h.register(this)):console.error("Failed to initialise WebGL.")}_init(){this._sourceNodes=[],this._processingNodes=[],this._timeline=[],this._currentTime=0,this._state=_.PAUSED,this._playbackRate=1,this._volume=1,this._sourcesPlaying=void 0}_update(e){if(this._sourceNodes=this._sourceNodes.filter(e=>{if(!e.destroyed)return e}),this._processingNodes=this._processingNodes.filter(e=>{if(!e.destroyed)return e}),this._state===_.PLAYING||this._state===_.STALLED||this._state===_.PAUSED){if(this._state!==_.PAUSED&&(this._isStalled()?this._state=_.STALLED:this._state=_.PLAYING),this._state===_.PLAYING&&(this._currentTime+=e*this._playbackRate,this._currentTime>this.duration&&this._endOnLastSourceEnd)){for(let e=0;e<this._sourceNodes.length;e++)this._sourceNodes[e]._update(this._currentTime);this._state=_.ENDED}let t=!1;for(let e=0;e<this._sourceNodes.length;e++){let i=this._sourceNodes[e];this._state===_.STALLED&&i._isReady()&&i._state===c.playing&&i._pause(),this._state===_.PAUSED&&i._pause(),this._state===_.PLAYING&&i._play(),i._update(this._currentTime),i._state!==c.paused&&i._state!==c.playing||(t=!0)}t!==this._sourcesPlaying&&this._state===_.PLAYING&&(this._sourcesPlaying=t);let i=[],s=this._graphManager.connections.slice(),r=o.default.getInputlessNodes(s);for(;r.length>0;){let e=r.pop();i.push(e);for(let t of o.default.outputEdgesFor(e,s)){let e=s.indexOf(t);e>-1&&s.splice(e,1),0===o.default.inputEdgesFor(t.output,s).length&&r.push(t.output)}}for(let e of i)-1===this._sourceNodes.indexOf(e)&&(e._update(this._currentTime),e._render())}}set currentTime(e){e<this.duration&&this._state===_.ENDED&&(this._state=_.PAUSED),e=parseFloat(e);for(let t=0;t<this._sourceNodes.length;t++)this._sourceNodes[t]._seek(e);for(let t=0;t<this._processingNodes.length;t++)this._processingNodes[t]._seek(e);this._currentTime=e}get currentTime(){return this._currentTime}get duration(){let e=0;for(let t=0;t<this._sourceNodes.length;t++)this._sourceNodes[t].state!==c.waiting&&this._sourceNodes[t]._stopTime>e&&(e=this._sourceNodes[t]._stopTime);return e}get output(){return this._outputNode}set playbackRate(e){if(e<=0)throw new RangeError("playbackRate must be greater than 0");for(let t of this._sourceNodes)"VideoNode"===t.constructor.name&&(t._globalPlaybackRate=e,t._playbackRateUpdated=!0);this._playbackRate=e}get playbackRate(){return this._playbackRate}set volume(e){for(let t of this._sourceNodes)"VideoNode"===t.constructor.name&&(t.volume=e);this._volume=e}get volume(){return this._volume}play(){return console.debug("Editor - playing"),this._videoElementCache&&this._videoElementCache.init(),this._state=_.PLAYING,!0}pause(){return console.log("VideoContext - pausing"),this._state=_.PAUSED,!0}_isStalled(){for(let e=0;e<this._sourceNodes.length;e++){if(!this._sourceNodes[e]._isReady())return!0}return!1}reset(){for(let e of this._sourceNodes)e.destroy();this._init()}_callPlugins(){p.plugins&&Object.keys(p.plugins).forEach(e=>{p.plugins[e].call(this,this)})}static install(e,t){p.plugins||(p.plugins={}),p.plugins[e]=t}static get DEFINITIONS(){return d.default}}p.STATE=_,p.Timeclock=h,p.utils=r.default,p.glUtils=n.default,p.ProcessingNode=a.default,p.SourceNode=l.default},"./src/graphManager.js":
/*!*****************************!*\
  !*** ./src/graphManager.js ***!
  \*****************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t),i.d(t,"default",function(){return s});class s{constructor(){this.connections=[]}registerConnection(e,t,i){if(t.inputs.length>=t.inputNames.length&&t._limitConnections,!1===t._limitConnections){this.getInputsForNode(t).includes(e)&&(console.debug("WARNING - node connected mutliple times, removing previous connection"),this.unregisterConnection(e,t))}if("number"==typeof i)this.connections.push({source:e,type:"zIndex",zIndex:i,output:t});else if("string"==typeof i&&t._limitConnections)this.isInputAvailable(t,i)&&this.connections.push({source:e,type:"name",name:i,output:t});else{let i=this.getZIndexInputsForNode(t),s=0;i.length>0&&(s=i[i.length-1].zIndex+1),this.connections.push({source:e,type:"zIndex",zIndex:s,output:t})}return!0}unregisterConnection(e,t){let i=[];return this.connections.forEach(function(s){s.source===e&&s.output===t&&i.push(s)}),0!==i.length&&(i.forEach(e=>{let t=this.connections.indexOf(e);this.connections.splice(t,1)}),!0)}isInputAvailable(e,t){if(-1===e._inputNames.indexOf(t))return!1;for(let i of this.connections)if("name"===i.type&&i.output===e&&i.name===t)return!1;return!0}getOutputsForNode(e){let t=[];return this.connections.forEach(function(i){i.source===e&&t.push(i.output)}),t}getNamedInputsForNode(e){let t=[];return this.connections.forEach(function(i){i.output===e&&"name"===i.type&&t.push(i)}),t}getZIndexInputsForNode(e){let t=[];return this.connections.forEach(function(i){i.output===e&&"zIndex"===i.type&&t.push(i)}),t.sort(function(e,t){return e.zIndex-t.zIndex}),t}getInputsForNode(e){let t=e.inputNames,i=[],s=this.getNamedInputsForNode(e),r=this.getZIndexInputsForNode(e);if(!0===e._limitConnections){for(let e=0;e<t.length;e++)i[e]=void 0;for(let e of s){i[t.indexOf(e.name)]=e.source}let e=0;for(let t=0;t<i.length;t++)void 0===i[t]&&void 0!==r[e]&&(i[t]=r[e].source,e+=1)}else{for(let e of s)i.push(e.source);for(let e of r)i.push(e.source)}return i}static outputEdgesFor(e,t){let i=[];for(let s of t)s.source===e&&i.push(s);return i}static inputEdgesFor(e,t){let i=[];for(let s of t)s.output===e&&i.push(s);return i}static getInputlessNodes(e){let t=[];for(let i of e)t.push(i.source);for(let i of e){let e=t.indexOf(i.output);-1!==e&&t.splice(e,1)}return t}}},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ./editor */"./src/editor.js");i(/*! ./plugins/VideoNode */"./src/plugins/VideoNode/index.js"),i(/*! ./plugins/EffectNode */"./src/plugins/EffectNode/index.js"),i(/*! ./plugins/TransitionNode */"./src/plugins/TransitionNode/index.js");t.default=s.default},"./src/plugins/EffectNode/effectnode.js":
/*!**********************************************!*\
  !*** ./src/plugins/EffectNode/effectnode.js ***!
  \**********************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ../../editor */"./src/editor.js");const r="EffectNode";t.default=class extends s.default.ProcessingNode{constructor(e,t,i){super(e,t,i,i.inputs,!0);let n=s.default.glUtils.createElementTexture(e);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this._placeholderTexture=n,this._displayName=r}_render(){let e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._texture,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.blendFunc(e.ONE,e.ZERO),super._render();let t=this._graphManager.getInputsForNode(this);for(var i=0;i<this._shaderInputsTextureUnitMapping.length;i++){let s=this._placeholderTexture,r=this._shaderInputsTextureUnitMapping[i].textureUnit;i<t.length&&void 0!==t[i]&&(s=t[i]._texture),e.activeTexture(r),e.uniform1i(this._shaderInputsTextureUnitMapping[i].location,this._shaderInputsTextureUnitMapping[i].textureUnitIndex),e.bindTexture(e.TEXTURE_2D,s)}e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,null)}}},"./src/plugins/EffectNode/index.js":
/*!*****************************************!*\
  !*** ./src/plugins/EffectNode/index.js ***!
  \*****************************************/
/*! no exports provided */function(e,t,i){"use strict";i.r(t);var s=i(/*! ../../editor */"./src/editor.js"),r=i(/*! ./effectnode */"./src/plugins/EffectNode/effectnode.js");s.default.install("effect",function(){this.effect=function(e){let t=new r.default(this._gl,this._graphManager,e);return this._processingNodes.push(t),t}})},"./src/plugins/TransitionNode/index.js":
/*!*********************************************!*\
  !*** ./src/plugins/TransitionNode/index.js ***!
  \*********************************************/
/*! no exports provided */function(e,t,i){"use strict";i.r(t);var s=i(/*! ../../editor */"./src/editor.js"),r=i(/*! ./transitionnode */"./src/plugins/TransitionNode/transitionnode.js");s.default.install("transition",function(){this.transition=function(e){let t=new r.default(this._gl,this._graphManager,e);return this._processingNodes.push(t),t}})},"./src/plugins/TransitionNode/transitionnode.js":
/*!******************************************************!*\
  !*** ./src/plugins/TransitionNode/transitionnode.js ***!
  \******************************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ../EffectNode/effectnode */"./src/plugins/EffectNode/effectnode.js");const r="TransitionNode";t.default=class extends s.default{constructor(e,t,i){super(e,t,i),this._transitions={},this._progressLocation=this._gl.getUniformLocation(this._program,"progress"),this._progress=0,this._initialPropertyValues={};for(let e in this._properties)this._initialPropertyValues[e]=this._properties[e].value;this._displayName=r}_doesTransitionFitOnTimeline(e){if(void 0===this._transitions[e.property])return!0;for(let t of this._transitions[e.property]){if(e.start>t.start&&e.start<t.end)return!1;if(e.end>t.start&&e.end<t.end)return!1;if(t.start>e.start&&t.start<e.end)return!1;if(t.end>e.start&&t.end<e.end)return!1}return!0}_insertTransitionInTimeline(e){void 0===this._transitions[e.property]&&(this._transitions[e.property]=[]),this._transitions[e.property].push(e),this._transitions[e.property].sort(function(e,t){return e.start-t.start})}transition(e,t,i,s,r="mix"){let n={start:e+this._currentTime,end:t+this._currentTime,current:i,target:s,property:r};return!!this._doesTransitionFitOnTimeline(n)&&(this._insertTransitionInTimeline(n),!0)}transitionAt(e,t,i,s,r="mix"){let n={start:e,end:t,current:i,target:s,property:r};return!!this._doesTransitionFitOnTimeline(n)&&(this._insertTransitionInTimeline(n),!0)}clearTransitions(e){void 0===e?this._transitions={}:this._transitions[e]=[]}clearTransition(e,t){let i=void 0;for(var s=0;s<this._transitions[e].length;s++){let r=this._transitions[e][s];t>r.start&&t<r.end&&(i=s)}return void 0!==i&&(this._transitions[e].splice(i,1),!0)}_update(e){super._update(e);for(let i in this._transitions){let s=this[i];this._transitions[i].length>0&&(s=this._transitions[i][0].current);let r=!1;for(var t=0;t<this._transitions[i].length;t++){let n=this._transitions[i][t];if(e>n.end){s=n.target;continue}let o=(this._currentTime-n.start)/(n.end-n.start);if(e>n.start&&e<n.end){let e=n.target-n.current;r=!0,this[i]=n.current+e*o,this._progress=o;break}e<n.start?this._progress=0:e>n.end&&(this._progress=1)}r||(this[i]=s)}}_render(){let e=this._gl;super._render(),e.uniform1f(this._progressLocation,parseFloat(this._progress))}}},"./src/plugins/VideoNode/index.js":
/*!****************************************!*\
  !*** ./src/plugins/VideoNode/index.js ***!
  \****************************************/
/*! no exports provided */function(e,t,i){"use strict";i.r(t);var s=i(/*! ../../editor */"./src/editor.js"),r=i(/*! ./videonode */"./src/plugins/VideoNode/videonode.js"),n=i(/*! ./videoelementcache.js */"./src/plugins/VideoNode/videoelementcache.js");s.default.install("video",function(){this._videoElementCache=new n.default(6),console.log("install"),this.video=function(e,t=0,i=4,s={}){let n=new r.default(e,this._gl,this._graphManager,this._currentTime,this._playbackRate,t,i,this._videoElementCache,s);return this._sourceNodes.push(n),n}})},"./src/plugins/VideoNode/medianode.js":
/*!********************************************!*\
  !*** ./src/plugins/VideoNode/medianode.js ***!
  \********************************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);var s=i(/*! ../../editor */"./src/editor.js");const r=s.default.SourceNode.SOURCENODESTATE;t.default=class extends s.default.SourceNode{constructor(e,t,i,s,r=1,n=0,o=4,a,u={}){super(e,t,i,s),this._preloadTime=o,this._sourceOffset=n,this._globalPlaybackRate=r,this._mediaElementCache=a,this._playbackRate=1,this._playbackRateUpdated=!0,this._attributes=Object.assign({volume:1},u),this._loopElement=!1,this._isElementPlaying=!1,this._attributes.loop&&(this._loopElement=this._attributes.loop)}set playbackRate(e){this._playbackRate=e,this._playbackRateUpdated=!0}set stretchPaused(e){super.stretchPaused=e,this._element&&(this._stretchPaused?this._element.pause():this._state===r.playing&&this._element.play())}get stretchPaused(){return this._stretchPaused}get playbackRate(){return this._playbackRate}get elementURL(){return this._elementURL}get _buffering(){return!!this._element&&this._element.readyState<HTMLMediaElement.HAVE_FUTURE_DATA}set volume(e){this._attributes.volume=e,void 0!==this._element&&(this._element.volume=this._attributes.volume)}_triggerLoad(){if(this._isResponsibleForElementLifeCycle&&(this._mediaElementCache?this._element=this._mediaElementCache.get():(this._element=document.createElement(this._elementType),this._element.setAttribute("crossorigin","anonymous"),this._element.setAttribute("webkit-playsinline",""),this._element.setAttribute("playsinline",""),this._playbackRateUpdated=!0),this._element.volume=this._attributes.volume,void 0!==window.MediaStream&&this._elementURL instanceof MediaStream?this._element.srcObject=this._elementURL:this._element.src=this._elementURL),this._element){for(let e in this._attributes)this._element[e]=this._attributes[e];let e=0;this._currentTime>this._startTime&&(e=this._currentTime-this._startTime),this._element.currentTime=this._sourceOffset+e,this._element.onerror=(()=>{void 0!==this._element&&(console.debug("Error with element",this._element),this._state=r.error,this._ready=!0,this._triggerCallbacks("error"))})}else this._state=r.error,this._ready=!0,this._triggerCallbacks("error");this._loadTriggered=!0}_load(){super._load(),this._loadTriggered||this._triggerLoad(),void 0!==this._element&&(this._element.readyState>3&&!this._element.seeking?(!1===this._loopElement&&(this._stopTime!==1/0&&null!=this._stopTime||(this._stopTime=this._startTime+this._element.duration,this._triggerCallbacks("durationchange",this.duration))),!0!==this._ready&&(this._triggerCallbacks("loaded"),this._playbackRateUpdated=!0),this._ready=!0):this._state!==r.error&&(this._ready=!1))}_unload(){if(super._unload(),this._isResponsibleForElementLifeCycle&&void 0!==this._element){this._element.removeAttribute("src"),this._element.srcObject=void 0,this._element.load();for(let e in this._attributes)this._element.removeAttribute(e);this._element=void 0,this._mediaElementCache||delete this._element}this._ready=!1,this._isElementPlaying=!1,this._loadTriggered=!1}_seek(e){if(super._seek(e),this.state===r.playing||this.state===r.paused){void 0===this._element&&this._load();let e=this._currentTime-this._startTime+this._sourceOffset;this._element.currentTime=e,this._ready=!1}this._state!==r.sequenced&&this._state!==r.ended||void 0===this._element||this._unload()}_update(e,t=!0){return super._update(e,t),void 0!==this._element&&this._element.ended&&(this._state=r.ended,this._triggerCallbacks("ended")),this._startTime-this._currentTime<=this._preloadTime&&this._state!==r.waiting&&this._state!==r.ended&&this._load(),this._state===r.playing?(this._playbackRateUpdated&&(this._element.playbackRate=this._globalPlaybackRate*this._playbackRate,this._playbackRateUpdated=!1),this._isElementPlaying||(this._element.play(),this._stretchPaused&&this._element.pause(),this._isElementPlaying=!0),!0):this._state===r.paused?(this._element&&this._element.pause(),this._isElementPlaying=!1,!0):this._state===r.ended&&void 0!==this._element?(this._element.pause(),this._isElementPlaying&&this._unload(),!1):void 0}clearTimelineState(){super.clearTimelineState(),void 0!==this._element&&(this._element.pause(),this._isElementPlaying=!1),this._unload()}destroy(){this._element&&this._element.pause(),super.destroy()}}},"./src/plugins/VideoNode/videoelementcache.js":
/*!****************************************************!*\
  !*** ./src/plugins/VideoNode/videoelementcache.js ***!
  \****************************************************/
/*! exports provided: default */function(e,t,i){"use strict";function s({src:e,srcObject:t}){return!((""===e||void 0===e)&&null==t)}i.r(t);t.default=class{constructor(e=3){this._elements=[],this._elementsInitialised=!1;for(let t=0;t<e;t++){let e=this._createElement();this._elements.push(e)}}_createElement(){let e=document.createElement("video");return e.setAttribute("crossorigin","anonymous"),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),e}init(){console.log("init cache"),this._elementsInitialised,this._elementsInitialised=!0}get(){for(let e of this._elements)if(!s(e))return e;console.debug("No available video element in the cache, creating a new one. This may break mobile, make your initial cache larger.");let e=this._createElement();return this._elements.push(e),this._elementsInitialised=!1,e}get length(){return this._elements.length}get unused(){let e=0;for(let t of this._elements)s(t)||(e+=1);return e}}},"./src/plugins/VideoNode/videonode.js":
/*!********************************************!*\
  !*** ./src/plugins/VideoNode/videonode.js ***!
  \********************************************/
/*! exports provided: VIDEOTYPE, default */function(e,t,i){"use strict";i.r(t),i.d(t,"VIDEOTYPE",function(){return r});var s=i(/*! ./medianode */"./src/plugins/VideoNode/medianode.js");const r="VideoNode";t.default=class extends s.default{constructor(){super(...arguments),this._displayName=r,this._elementType="video"}}},"./src/utils/glutils.js":
/*!******************************!*\
  !*** ./src/utils/glutils.js ***!
  \******************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);let s={compileShader:function(e,t,i){let s=e.createShader(i);if(e.shaderSource(s,t),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw"could not compile shader:"+e.getShaderInfoLog(s);return s},createShaderProgram:function(e,t,i){let s=e.createProgram();if(e.attachShader(s,t),e.attachShader(s,i),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw{error:4,msg:"Can't link shader program for track",toString:function(){return this.msg}};return s},createElementTexture:function(e){let t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),t},updateTexture:function(e,t,i){void 0!==i.readyState&&0===i.readyState||(e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i))},clearTexture:function(e,t){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]))}};t.default=s},"./src/utils/utils.js":
/*!****************************!*\
  !*** ./src/utils/utils.js ***!
  \****************************/
/*! exports provided: default */function(e,t,i){"use strict";i.r(t);let s={visualiseVideoContextTimeline:function(e,t,i){let s=t.getContext("2d"),r=t.width,n=t.height,o=n/e._sourceNodes.length,a=e.duration;if(i>a&&!e.endOnLastSourceEnd&&(a=i),e.duration===1/0){let t=0;for(let i=0;i<e._sourceNodes.length;i++){let s=e._sourceNodes[i];s._stopTime!==1/0&&(t+=s._stopTime)}a=t>e.currentTime?t+5:e.currentTime+5}let u=r/a,l={video:["#572A72","#3C1255"],image:["#7D9F35","#577714"],canvas:["#AA9639","#806D15"]};s.clearRect(0,0,r,n),s.fillStyle="#999";for(let t of e._processingNodes)if("TransitionNode"===t.displayName)for(let e in t._transitions)for(let i of t._transitions[e]){let e=(i.end-i.start)*u,t=n,r=i.start*u,o=0;s.fillStyle="rgba(0,0,0, 0.3)",s.fillRect(r,o,e,t),s.fill()}for(let t=0;t<e._sourceNodes.length;t++){let i=e._sourceNodes[t],r=i._stopTime-i._startTime;r===1/0&&(r=e.currentTime);let n=r*u,a=o,d=i._startTime*u,c=o*t;s.fillStyle=l.video[t%l.video.length],s.fillRect(d,c,n,a),s.fill()}void 0!==i&&(s.fillStyle="#000",s.fillRect(i*u,0,1,n))}};t.default=s},0:
/*!****************************!*\
  !*** multi ./src/index.js ***!
  \****************************/
/*! no static exports found */function(e,t,i){e.exports=i(/*! ./src/index.js */"./src/index.js")}}).default});
//# sourceMappingURL=index.js.map